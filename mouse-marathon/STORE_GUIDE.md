# Mac App Store 公開ガイド

このアプリは、Mac App Store (MAS) での公開を最優先事項として設計されています。
審査リジェクトのリスクを最小限に抑えるため、以下の技術的決定を行っています。

## 1. 入力監視について

### 従来の手法 (非推奨)
通常、マウス移動の監視には `CGEventTap` (Quartz Event Services) が使われますが、これには以下の問題があります：
*   **権限:** 「入力監視 (Input Monitoring)」という強力な権限が必要です。
*   **サンドボックス:** App Sandbox 環境下では機能しないか、非常に厳しい制限があります。
*   **審査:** キーロガーと同様の技術であるため、正当な理由があってもリジェクトされる可能性が高いです。

### 本アプリの手法 (推奨)
本アプリでは **「定期的な座標ポーリング」** を採用しています。
*   **仕組み:** Rust バックエンドで 100ms (0.1秒) ごとに `CGEventSource` から現在のマウス座標を取得し、前回との差分を計算します。
*   **メリット:**
    *   特別な権限（入力監視）が不要です。
    *   **App Sandbox (サンドボックス)** 内で安全に動作します。
    *   ユーザーのプライバシーを侵害するリスクが低く、審査に通りやすいです。

## 2. 必要な Entitlements (権限)

Tauri v2 のデフォルト設定でサンドボックスが有効になっています。
`src-tauri/capabilities/default.json` および生成される Xcode プロジェクトの設定で以下を確認してください。

*   **App Sandbox:** `YES` (必須)
*   **File Access:** `tauri-plugin-store` が使用する `Application Support` フォルダへのアクセスは、Tauri が自動的に適切な範囲（コンテナ内）で処理するため、追加のファイルアクセス権限は通常不要です。

## 3. Privacy Policy (プライバシーポリシー)

Store Connect 提出時に以下の点を含むプライバシーポリシーを用意することをお勧めします：
*   このアプリはマウスの「移動距離」のみを計算・保存します。
*   操作の内容、クリックした場所、入力したキーなどの個人情報は一切収集・送信しません。
*   データはローカルデバイス内にのみ保存されます。

## 4. ビルド設定

`src-tauri/tauri.conf.json` の `identifier` (`com.mouse-marathon.app`) は、Apple Developer Program で登録した Bundle ID と一致させてください。
